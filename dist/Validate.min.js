!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Validate=t()}(this,(function(){"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}return function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.rule=e,this.messageRuleSetting=t||{},this.errorMsg="error",this.errorMsgs=[],this.debug=!1,this.validateDatas=!1,this.validateRules={email:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,number:/^-?\d*\.?\d+$/,chinese:/^[\u4e00-\u9fa5]+$/,idcard:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,mobile:/^[1][3-9][0-9]{9}$/,require:function(e){return!(null==e||""===e)},max:function(e,t){return!((""+e).length>parseInt(t))},min:function(e,t){return!((""+e).length<parseInt(t))},"<":function(){var e;return(e=this.validateRules).lt.apply(e,arguments)},">":function(){var e;return(e=this.validateRules).gt.apply(e,arguments)},"<=":function(){var e;return(e=this.validateRules).elt.apply(e,arguments)},">=":function(){var e;return(e=this.validateRules).egt.apply(e,arguments)},lt:function(e,t){return parseFloat(e)<parseFloat(t)},gt:function(e,t){return parseFloat(e)>parseFloat(t)},elt:function(e,t){return parseFloat(e)<=parseFloat(t)},egt:function(e,t){return parseFloat(e)>=parseFloat(t)},integer:function(e){return!isNaN(e)&&parseInt(e)==parseFloat(e)},in:function(){for(var e=1,t=arguments.length;e<t;e++)if(arguments[0]==arguments[e])return!0;return!1},notIn:function(){for(var e=1,t=arguments.length;e<t;e++)if(arguments[0]==arguments[e])return!1;return!0},float:function(e){return/^[-+]?[0-9]*\.?[0-9]*$/.test(e)},bool:function(e){return this.validateRules.boolean(e)},boolean:function(e){return"boolean"==typeof e||("true"==e||"false"==e)},array:function(e){return Array.isArray(e)},accepted:function(e){return"yes"==e||"on"==e||1==parseInt(e)},length:function(e,t,r){return r?(e+"").length>=t&&(e+"").length<=r:(e+"").length==parseInt(t)}},this.message={number:"$0只能是数字",integer:"$0只能填整数",float:"$0只能浮点数",boolean:"$0只能填布尔值",bool:"$0只能填布尔值",email:"$0格式不正确",array:"$0数据类型不正确",accepted:"$0必须同意",chinese:"$0只能是中文",idcard:"$0格式不正确",mobile:"$0格式不正确",require:"$0不能为空",length:"$0长度只能是$1到$2个字符","length:1":"$0长度只能是$1",min:"$0的长度至少$1个",max:"$0的长度不能超过$1个",eq:"$0只能是$1",neq:"$0不能为$1",gt:"$0需要大于$1",">":"$0需要大于$1",lt:"$0需要小于$1","<":"$0需要小于$1",egt:"$0需要大于等于$1",">=":"$0需要大于等于$1",elt:"$0需要小于等于$1","<=":"$0需要小于等于$1",between:"$0值只能在$1到$2之间",in:"$0只能取$n",notIn:"$0不能在$n之间",confirm:"$0与:1不一致"},this.data={}}var n,a,i;return n=r,(a=[{key:"rule",value:function(){}},{key:"parse",value:function(e){var t=e.split("|"),r={};for(var n in t){var a=t[n].split(":"),i=a[0],o=a[1]?a[1].split(","):[];r[i]={name:i,args:o}}return r}},{key:"check",value:function(e,r,n){var a=this;this.validateDatas=e,this.errorMsgs=[],this.errorMsg="",r=r||!1,n=n||!1,this.data=e;var i=function(){var i=o,l=i,c=a.rule[o],f=i.split("|");f.length>1&&(i=f[0],l=f[1]),u=a.parse(c),a.debug;var g=[],h=function(){g.push("开始验证"+s);var r=u[s].args;if(!a.validateRules.require(e[i])&&!u.require)return g.push("没有填写可以不验证的"),"continue";if(!a.validateRules[s])return g.push("未定义验证规则".concat(s)),"continue";var o="function"==typeof a.validateRules[s]?a.validateRules[s].apply(a,[e[i]].concat(t(r))):a.validateRules[s].test(e[i]);if(g.push({vArgs:r,data:e[i],validate:s,status:o?"成功":"失败"}),!o){var c="".concat(l,"参数错误");if(a.messageRuleSetting["".concat(i,".").concat(s)])c=a.messageRuleSetting["".concat(i,".").concat(s)];else if(a.messageRuleSetting[i])c=a.messageRuleSetting[i];else if(a.message[s]){var f=r.length;c=(a.message[s+":"+f]||a.message[s]).replace(/\$([\din])+/g,(function(e,t){if("$0"==e)return l;if("$n"==e)return r.join(",");var n=e.match(/\$([\dn]+)/),a=parseInt(n[1]);return r[a-1]}))}if(a.errorMsgs.push({field:i,name:l,rule:s,msg:c,args:r}),!n)return"break"}};e:for(s in u)switch(h()){case"continue":continue;case"break":break e}if(a.debug&&console.log(g),a.errorMsgs.length&&(a.errorMsg=a.errorMsgs[0].msg,!r))return"break"};for(var o in this.rule){var u,s;if("break"===i())break}return!this.errorMsgs.length}},{key:"getValidateData",value:function(){return this.validateDatas}},{key:"getError",value:function(){return this.errorMsg}},{key:"getErrorInfo",value:function(){return this.errorMsgs[0]}},{key:"getErrors",value:function(){return this.errorMsgs}},{key:"getErrorField",value:function(){return!!this.errorMsgs.length&&this.errorMsgs[0].field}},{key:"getRules",value:function(e){}}])&&e(n.prototype,a),i&&e(n,i),r}()}));
